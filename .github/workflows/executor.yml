name: ðŸ› ï¸ PHOENIX EXECUTOR

on:
  workflow_dispatch:
    inputs:
      task_payload:
        required: true
      run_id:
        required: false

jobs:
  execute:
    runs-on: ubuntu-latest
    steps:
      - name: 1.1 - Prepare
        run: |
          echo "${{ github.event.inputs.task_payload }}" > task.py
          if [ ! -s task.py ]; then echo "âŒ Empty Payload"; exit 1; fi

      - name: 2.1 - Run & Debug
        run: |
          echo "--- EXECUTION START ---"
          # Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙƒØªÙŠÙƒ bash Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£ Ø¨Ø¯Ù‚Ø©
          python3 -u task.py 2>&1 | tee execution.log
          if [ ${PIPESTATUS[0]} -ne 0 ]; then
            echo "âŒ Python Execution Failed"
            exit 1
          fi
          echo "--- SUCCESS ---"

      - name: 3.1 - Report
        if: always()
        run: |
          echo "### ðŸš€ System Feedback" >> $GITHUB_STEP_SUMMARY
          echo '```python' >> $GITHUB_STEP_SUMMARY
          cat execution.log >> $GITHUB_STEP_SUMMARY
          echo '```' >> $GITHUB_STEP_SUMMARY